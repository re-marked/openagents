@import url('https://fonts.cdnfonts.com/css/sf-pro-display');
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/*
 * AgentBay design system — warm dark palette.
 *
 * Surface hierarchy (3 levels):
 *   Level 0 — sidebar + header:  hsl(30, 3%, 7%)   deepest
 *   Level 1 — page background:   hsl(30, 3%, 10%)  mid
 *   Level 2 — cards / elevated:  hsl(30, 3%, 13%)  lightest surface
 *   Hover:                       hsl(30, 4%, 16%)
 *
 * All grays use hue 30 (warm) at very low saturation (3-4%).
 * Accent: warm blue hsl(215, 90%, 58%) — not electric, slightly muted.
 */
@layer base {
  :root {
    --background: 30 3% 10%;
    --foreground: 40 10% 95%;
    --card: 30 3% 13%;
    --card-foreground: 40 10% 95%;
    --popover: 30 3% 13%;
    --popover-foreground: 40 10% 95%;
    --primary: 215 90% 58%;
    --primary-foreground: 0 0% 100%;
    --secondary: 30 3% 16%;
    --secondary-foreground: 40 6% 75%;
    --muted: 30 3% 16%;
    --muted-foreground: 30 5% 50%;
    --accent: 30 3% 18%;
    --accent-foreground: 40 10% 95%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;
    --border: 30 3% 18%;
    --input: 30 3% 18%;
    --ring: 0 0% 50% / 0.5;
    --chart-1: 215 90% 58%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
    /* Status colors */
    --status-running: 142 71% 45%;
    --status-suspended: 48 96% 53%;
    --status-stopped: 25 95% 53%;
    --status-provisioning: 215 90% 58%;
    --status-error: 0 72% 51%;

    /* Gradient endpoints */
    --gradient-from: 215 90% 65%;
    --gradient-to: 30 80% 60%;

    --radius: 0.75rem;
    --sidebar-background: 30 3% 7%;
    --sidebar-foreground: 30 5% 55%;
    --sidebar-primary: 215 90% 58%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 30 3% 13%;
    --sidebar-accent-foreground: 40 10% 95%;
    --sidebar-border: 30 3% 14%;
    --sidebar-ring: 215 90% 58%;
  }
}

@theme inline {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --font-sans: 'SF Pro Display', system-ui, sans-serif;
  --font-mono: var(--font-geist-mono);
  --color-status-running: hsl(var(--status-running));
  --color-status-suspended: hsl(var(--status-suspended));
  --color-status-stopped: hsl(var(--status-stopped));
  --color-status-provisioning: hsl(var(--status-provisioning));
  --color-status-error: hsl(var(--status-error));
  --color-gradient-from: hsl(var(--gradient-from));
  --color-gradient-to: hsl(var(--gradient-to));
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Hide scrollbar for horizontal scroll containers */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

:root {
  --sidebar: hsl(30 3% 7%);
  --sidebar-foreground: hsl(30 5% 55%);
  --sidebar-primary: hsl(215 90% 58%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(30 3% 13%);
  --sidebar-accent-foreground: hsl(40 10% 95%);
  --sidebar-border: hsl(30 3% 14%);
  --ring: 0 0% 50% / 0.5;
}

/* Slightly larger sidebar text (14px → 15px) */
[data-sidebar="menu-button"],
[data-sidebar="group-content"] {
  font-size: 0.9375rem;
}

[data-sidebar="group-label"] {
  font-size: 0.8125rem;
}

html {
  scroll-padding-top: 4rem;
}

/* Lenis smooth scrolling */
html.lenis, html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

.lenis.lenis-stopped {
  overflow: hidden;
}

.lenis.lenis-scrolling iframe {
  pointer-events: none;
}

/* Animated gradient border for cards */
@property --border-angle {
  syntax: "<angle>";
  initial-value: 0deg;
  inherits: false;
}

.animate-border-rotate {
  animation: border-rotate 4s linear infinite;
}

@keyframes border-rotate {
  to {
    --border-angle: 360deg;
  }
}

/* ═══════════════════════════════════════════════════════════════
   Apple-style spring animations — whole app
   ═══════════════════════════════════════════════════════════════ */

/*
 * 32-point CSS spring curve approximation (stiffness 380, damping 30, mass 0.8).
 * Slight overshoot (~1.115) then settles smoothly.
 */
:root {
  --spring-easing: linear(
    0, 0.009, 0.035 2.1%, 0.141 4.4%, 0.723 12.9%, 0.938 16.7%,
    1.017 18.9%, 1.067, 1.099 22.2%, 1.114 23.5%, 1.115 25.1%,
    1.096 27.5%, 1.027 33.1%, 1.004 36.3%, 0.994 39.4%,
    0.993 44.4%, 1.001 55.3%, 1
  );
  --spring-duration: 0.5s;
}

/* ── Phase 1: Spring timing for all shadcn animate-in / animate-out ── */
/* !important needed to override Tailwind v4 `duration-200` utility on shadcn components */
[data-state="open"][class*="animate-in"],
[data-state="closed"][class*="animate-out"] {
  animation-timing-function: var(--spring-easing) !important;
  animation-duration: var(--spring-duration) !important;
}

/* ── Phase 2: Sidebar collapse/expand spring ── */
[data-slot="sidebar-gap"],
[data-slot="sidebar-container"] {
  transition-timing-function: var(--spring-easing) !important;
  transition-duration: var(--spring-duration) !important;
}

[data-slot="sidebar-group-label"] {
  transition-timing-function: var(--spring-easing) !important;
  transition-duration: var(--spring-duration) !important;
}

/* ── Phase 5: Button press spring ── */
[data-slot="button"] {
  transition: transform 0.2s var(--spring-easing),
              background-color 0.15s ease,
              color 0.15s ease,
              border-color 0.15s ease;
}

[data-slot="button"]:active {
  transform: scale(0.97);
  transition: transform 0.1s var(--spring-easing);
}

/* ── Phase 5: Card hover lift ── */
[data-slot="card"] {
  transition: transform 0.35s var(--spring-easing),
              box-shadow 0.35s ease;
}

[data-slot="card"]:hover {
  transform: translateY(-2px) scale(1.008);
}

/* ── Phase 6: Accordion spring ── */
[data-slot="accordion-content"] {
  animation-timing-function: var(--spring-easing) !important;
  animation-duration: var(--spring-duration) !important;
}

[data-slot="accordion-trigger"] svg {
  transition-timing-function: var(--spring-easing) !important;
  transition-duration: 0.35s !important;
}
